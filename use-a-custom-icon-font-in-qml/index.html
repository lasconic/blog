
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Use a custom icon font in QML</title>
    <meta name="description" content="">

    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="../favicon.ico">

    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css?v=1e27d644bb">
    <link rel="stylesheet" type="text/css" href="../assets/css/prism.css?v=1e27d644bb">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic%7COpen+Sans:700,400">
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

    <meta name="generator" content="Ghost 0.5">
<link rel="alternate" type="application/rss+xml" title="Lasconic's notes" href="../rss/index.html">
<link rel="canonical" href="index.html">
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-11569944-3', 'auto');
      ga('send', 'pageview');
    </script>
</head>
<body class="post-template tag-qt tag-qml tag-qt-quick tag-design">

    

<nav class="main-nav clearfix">
    <a class="back-button icon-arrow-left" href="../">Home</a>
    <a class="subscribe-button icon-feed" href="../rss/index.rss">Subscribe</a>
</nav>

<main class="content" role="main">

    <article class="post tag-qt tag-qml tag-qt-quick tag-design">

        <header class="post-header">
            <h1 class="post-title">Use a custom icon font in QML</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2014-09-22">22 September 2014</time>  on <a href="../tag/qt/">Qt</a>, <a href="../tag/qml/">QML</a>, <a href="../tag/qt-quick/">Qt Quick</a>, <a href="../tag/design/">Design</a>
            </section>
        </header>

        <section class="post-content">
            <p>When it comes to images, mobile development is facing exactly the same problem than mobile web development. Images need to scale well, have a decent file size etc.. Responsive web design often use icon fonts to solve this problem for icons. In this case, an icon font also have the advantage of limiting HTTP requests.</p>

<p>In QML, we do have the possibilities to use <a href="http://qt-project.org/doc/qt-5/qml-qtquick-borderimage.html">BorderImage</a>, or to use SVG files. Both approaches have their merits but they also have some drawbacks. For example, currently, SVG files are not rendered correctly on retina display (<a href="https://bugreports.qt-project.org/browse/QTBUG-35271">QTBUG-35271</a>). BorderImage are less interesting for icons since the icon itself would not scale.</p>

<p>Other developers used icon fonts in QML, in particular using the Font Awesome web font.</p>

<h3 id="previousworkswithfontawesome">Previous works with Font Awesome</h3>

<p><a href="http://fortawesome.github.io/Font-Awesome/">Font Awesome</a> is a popular icon font in web development. So popular than for oncen it's also used in QML. 2 years ago, markg85 described how to <a href="http://kdeblog.mageprojects.com/2012/11/20/using-fonts-awesome-in-qml/">Use font awesome in QML</a>. Recently, Ricardo do Valle created a <a href="https://github.com/ricardodovalle/font-awesome-qml">GitHub project</a> to demonstrate the same approach with QML in Qt 5.3.</p>

<p>Here I want to quickly show how one can create his own web font and use it in QML, based on the same method.</p>

<h3 id="createafontonicomoon">Create a font on Icomoon</h3>

<p>Create a couple of icons in your favorite vector graphics editor, save as SVG and go to <a href="https://icomoon.io/">Icomoon.io</a>. The website is one of the numerous options available to create a web font. It's easy to add your icons and then create a font. You can customize codepoints, font name and so on.</p>

<h3 id="addthefonttoaqmlapp">Add the font to a QML app</h3>

<p>The QML app will use the TTF format of the font. You can grab it from the zip generated by Icomoon. We would also want to have an easy way to refer to each icon in the font to avoid the following:</p>

<pre><code class="language-javascript">Label {  
   text: "\ue601"
   font.family: "MyFont"
}
</code></pre>

<p>Icomoon also provide an HTML demo file. I wrote a small python script to parse it and extract a javascript file to map the codepoints with human friendly names. The script takes the path to demo.html as a command line parameter.</p>

<pre><code class="language-python">import requests  
import re  
import sys

from bs4 import BeautifulSoup

f = open(sys.argv[1],"r")  
data = f.read()  
soup = BeautifulSoup(data)

glyphs = soup.find_all('div', class_="glyph")

print ".pragma library"  
print "var Icon = {"  
for g in glyphs:  
    ##t = g.text.strip()
    pbs = g.find_all('div', class_="pbs")

    for pb in pbs:
        variable = pb.text.strip()
        variable =  re.sub(r'(?!^)-([a-zA-Z])', lambda m: m.group(1).upper(), variable[10:])
        #print variable

    input = g.find_all('input', class_="unit size1of2")

    for i in input:
        charcode = "\\u" + i['value']

    print "      " + variable + " " * (20 - len(variable))  + ": \"" + charcode + "\","

print "}"  
</code></pre>

<p>The output of this script is a javascript file, <code>MyFont.js</code> to include in a QML app. And we can then write:</p>

<pre><code class="language-javascript">import "MyFont.js" as MyFont  
Label {  
   text: MyFont.Icon.logo // name of the icon
   font.family: "MyFont"
}
</code></pre>

<h3 id="conclusion">Conclusion</h3>

<p>This is it. Comments or questions? <a href="https://twitter.com/lasconic">@lasconic</a></p>
        </section>

        <footer class="post-footer">


            <figure class="author-image">
                <a class="img" href="../author/lasconic/" style="background-image: url(http://www.gravatar.com/avatar/13235ccd902ea667b2b4353eb74fc812?d=404&amp;s=250)"><span class="hidden">lasconic's Picture</span></a>
            </figure>

            <section class="author">
                <h4><a href="../author/lasconic/">lasconic</a></h4>

                    <p>Read <a href="../author/lasconic/">more posts</a> by this author.</p>
                <div class="author-meta">
                    
                    
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/share?text=Use%20a%20custom%20icon%20font%20in%20QML&amp;url=http://127.0.0.1:2368/use-a-custom-icon-font-in-qml/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://127.0.0.1:2368/use-a-custom-icon-font-in-qml/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://127.0.0.1:2368/use-a-custom-icon-font-in-qml/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>

        </footer>

    </article>

</main>


    <footer class="site-footer clearfix">
         <section class="copyright"><a href="../">Lasconic's notes</a> Â© 2016 - Licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International Licence</a>.</section>
         <section class="poweredby">Proudly published with <a href="https://ghost.org">Ghost</a></section>
    </footer>

    <script src="../public/jquery.js?v=1e27d644bb"></script>

    <script type="text/javascript" src="../assets/js/jquery.fitvids.js?v=1e27d644bb"></script>
    <script type="text/javascript" src="../assets/js/index.js?v=1e27d644bb"></script>
    <script type="text/javascript" src="../assets/js/prism.js?v=1e27d644bb"></script>

</body>
